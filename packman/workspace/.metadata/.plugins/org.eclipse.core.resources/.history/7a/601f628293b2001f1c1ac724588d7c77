#include "ghost_movement.h"
#include <stdlib.h>

// Function to move Blinky toward Pac-Man's position
void update_blinky_position(uint32_t g_x, uint32_t g_y, uint32_t* g_dir, uint32_t* g_mv,
                            uint32_t pm_x, uint32_t pm_y, int grid[31][28]) {

    int ghost_row = (*g_y - 8) / 15;
    int ghost_col = (*g_x - 110) / 15;

    int target_row = (pm_y - 8) / 15;
    int target_col = (pm_x - 110) / 15;

    int delta_row = target_row - ghost_row;
    int delta_col = target_col - ghost_col;

    // Simplified logic to move Blinky towards Pac-Man
    if (delta_col > 0) {
        *g_dir = 2; // Move Right
        ghost_col++;
    } else if (delta_col < 0) {
        *g_dir = 0; // Move Left
        ghost_col--;
    } else if (delta_row > 0) {
        *g_dir = 1; // Move Down
        ghost_row++;
    } else if (delta_row < 0) {
        *g_dir = 3; // Move Up
        ghost_row--;
    }

    // Update ghost position
    *g_mv = 1;
}
